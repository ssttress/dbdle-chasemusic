<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DBD Chase Music Guessing Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 30px;
      background-color: #121212;
      color: #f0f0f0;
    }

    input, button {
      padding: 10px;
      margin: 5px;
      font-size: 18px;
    }

    #guessInput {
      text-transform: capitalize;
    }

    #guesses {
      margin-top: 20px;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }

    .guess-row {
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
      font-weight: bold;
    }

    .wrong {
      background-color: #802020;
    }

    .correct {
      background-color: #207020;
    }

    #winMessage {
      font-size: 24px;
      margin-top: 20px;
      color: limegreen;
    }

    #newRoundButton {
      display: none;
      margin-top: 20px;
    }

    .audio-btn {
      font-size: 18px;
      padding: 10px 16px;
      border-radius: 6px;
      background-color: #303030;
      color: white;
      cursor: pointer;
      min-width: 80px;
    }

    .audio-btn:hover {
      background-color: #505050;
    }

    .dropdown {
      position: absolute;
      background-color: #222;
      border: 1px solid #444;
      border-radius: 4px;
      z-index: 10;
      width: 100%;
      max-height: 150px;
      overflow-y: auto;
      display: none;
    }

    .dropdown div {
      padding: 8px;
      cursor: pointer;
    }

    .dropdown div:hover {
      background-color: #444;
    }

    #audioButtons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
  </style>
</head>
<body>

  <h1>Guess the Killer's Chase Music</h1>

  <div id="audioButtons">
    <button class="audio-btn" data-tier="0">32m ▶</button>
    <button class="audio-btn" data-tier="1">16m 🔒</button>
    <button class="audio-btn" data-tier="2">8m 🔒</button>
    <button class="audio-btn" data-tier="3">Chase 🔒</button>
  </div>

  <audio id="audioPlayer" hidden></audio>

  <div style="position: relative; display: inline-block;">
    <input type="text" id="guessInput" placeholder="Enter killer name" autocomplete="off">
    <div id="suggestions" class="dropdown"></div>
  </div>

  <button id="submitGuess">Submit Guess</button>

  <div id="guesses"></div>
  <div id="winMessage"></div>
  <button id="newRoundButton">Play New Round</button>

  <script>
    const killers = [
            {
        name: "Default",
        files: {
          "32m": "TerrorRadius_Default_000.ogg",
          "16m": "TerrorRadius_Default_001.ogg",
          "8m": "TerrorRadius_Default_002.ogg",
          "chase": "TerrorRadius_Default_003.ogg"
        }
      },
      {
        name: "Hillbilly",
        files: {
          "32m": "TerrorRadius_Hillbilly_000.ogg",
          "16m": "TerrorRadius_Hillbilly_001.ogg",
          "8m": "TerrorRadius_Hillbilly_002.ogg",
          "chase": "TerrorRadius_Hillbilly_003.ogg"
        }
      },
      {
        name: "Nurse",
        files: {
          "32m": "TerrorRadius_Nurse_000.ogg",
          "16m": "TerrorRadius_Nurse_001.ogg",
          "8m": "TerrorRadius_Nurse_002.ogg",
          "chase": "TerrorRadius_Nurse_003.ogg"
        }
      },
      {
        name: "Shape",
        files: {
          "32m": "TerrorRadius_Shape_000.ogg",
          "16m": "TerrorRadius_Shape_001.ogg",
          "8m": "TerrorRadius_Shape_002.ogg",
          "chase": "TerrorRadius_Shape_003.ogg"
        }
      },
      {
        name: "Hag",
        files: {
          "32m": "TerrorRadius_Hag_000.ogg",
          "16m": "TerrorRadius_Hag_001.ogg",
          "8m": "TerrorRadius_Hag_002.ogg",
          "chase": "TerrorRadius_Hag_003.ogg"
        }
      },
      {
        name: "Doctor",
        files: {
          "32m": "TerrorRadius_Doctor_000.ogg",
          "16m": "TerrorRadius_Doctor_001.ogg",
          "8m": "TerrorRadius_Doctor_002.ogg",
          "chase": "TerrorRadius_Doctor_003.ogg"
        }
      },
      {
        name: "Clown",
        files: {
          "32m": "TerrorRadius_Clown_000.ogg",
          "16m": "TerrorRadius_Clown_001.ogg",
          "8m": "TerrorRadius_Clown_002.ogg",
          "chase": "TerrorRadius_Clown_003.ogg"
        }
      },
      {
        name: "Spirit",
        files: {
          "32m": "TerrorRadius_Spirit_000.ogg",
          "16m": "TerrorRadius_Spirit_001.ogg",
          "8m": "TerrorRadius_Spirit_002.ogg",
          "chase": "TerrorRadius_Spirit_003.ogg"
        }
      },
      {
        name: "Legion",
        files: {
          "32m": "TerrorRadius_Legion_000.ogg",
          "16m": "TerrorRadius_Legion_001.ogg",
          "8m": "TerrorRadius_Legion_002.ogg",
          "chase": "TerrorRadius_Legion_003.ogg"
        }
      },
      {
        name: "Ghost Face",
        files: {
          "32m": "TerrorRadius_Ghost_Face_000.ogg",
          "16m": "TerrorRadius_Ghost_Face_001.ogg",
          "8m": "TerrorRadius_Ghost_Face_002.ogg",
          "chase": "TerrorRadius_Ghost_Face_003.ogg"
        }
      },
      {
        name: "Demogorgon",
        files: {
          "32m": "TerrorRadius_Demogorgon_000.ogg",
          "16m": "TerrorRadius_Demogorgon_001.ogg",
          "8m": "TerrorRadius_Demogorgon_002.ogg",
          "chase": "TerrorRadius_Demogorgon_003.ogg"
        }
      },
      {
        name: "Oni",
        files: {
          "32m": "TerrorRadius_Oni_000.ogg",
          "16m": "TerrorRadius_Oni_001.ogg",
          "8m": "TerrorRadius_Oni_002.ogg",
          "chase": "TerrorRadius_Oni_003.ogg"
        }
      },
      {
        name: "Deathslinger",
        files: {
          "32m": "TerrorRadius_Deathslinger_000.ogg",
          "16m": "TerrorRadius_Deathslinger_001.ogg",
          "8m": "TerrorRadius_Deathslinger_002.ogg",
          "chase": "TerrorRadius_Deathslinger_003.ogg"
        }
      },
      {
        name: "Executioner",
        files: {
          "32m": "TerrorRadius_Executioner_000.ogg",
          "16m": "TerrorRadius_Executioner_001.ogg",
          "8m": "TerrorRadius_Executioner_002.ogg",
          "chase": "TerrorRadius_Executioner_003.ogg"
        }
      },
      {
        name: "Blight",
        files: {
          "32m": "TerrorRadius_Blight_000.ogg",
          "16m": "TerrorRadius_Blight_001.ogg",
          "8m": "TerrorRadius_Blight_002.ogg",
          "chase": "TerrorRadius_Blight_003.ogg"
        }
      },
      {
        name: "Twins",
        files: {
          "32m": "TerrorRadius_Twins_000.ogg",
          "16m": "TerrorRadius_Twins_001.ogg",
          "8m": "TerrorRadius_Twins_002.ogg",
          "chase": "TerrorRadius_Twins_003.ogg"
        }
      },
      {
        name: "Trickster",
        files: {
          "32m": "TerrorRadius_Trickster_000.ogg",
          "16m": "TerrorRadius_Trickster_001.ogg",
          "8m": "TerrorRadius_Trickster_002.ogg",
          "chase": "TerrorRadius_Trickster_003.ogg"
        }
      },
      {
        name: "Nemesis",
        files: {
          "32m": "TerrorRadius_Nemesis_000.ogg",
          "16m": "TerrorRadius_Nemesis_001.ogg",
          "8m": "TerrorRadius_Nemesis_002.ogg",
          "chase": "TerrorRadius_Nemesis_003.ogg"
        }
      },
      {
        name: "Cenobite",
        files: {
          "32m": "TerrorRadius_Cenobite_000.ogg",
          "16m": "TerrorRadius_Cenobite_001.ogg",
          "8m": "TerrorRadius_Cenobite_002.ogg",
          "chase": "TerrorRadius_Cenobite_003.ogg"
        }
      },
      {
        name: "Artist",
        files: {
          "32m": "TerrorRadius_Artist_000.ogg",
          "16m": "TerrorRadius_Artist_001.ogg",
          "8m": "TerrorRadius_Artist_002.ogg",
          "chase": "TerrorRadius_Artist_003.ogg"
        }
      },
      {
        name: "Onryo",
        files: {
          "32m": "TerrorRadius_Onryo_000.ogg",
          "16m": "TerrorRadius_Onryo_001.ogg",
          "8m": "TerrorRadius_Onryo_002.ogg",
          "chase": "TerrorRadius_Onryo_003.ogg"
        }
      },
      {
        name: "Dredge",
        files: {
          "32m": "TerrorRadius_Dredge_000.ogg",
          "16m": "TerrorRadius_Dredge_001.ogg",
          "8m": "TerrorRadius_Dredge_002.ogg",
          "chase": "TerrorRadius_Dredge_003.ogg"
        }
      },
      {
        name: "Mastermind",
        files: {
          "32m": "TerrorRadius_Mastermind_000.ogg",
          "16m": "TerrorRadius_Mastermind_001.ogg",
          "8m": "TerrorRadius_Mastermind_002.ogg",
          "chase": "TerrorRadius_Mastermind_003.ogg"
        }
      },
      {
        name: "Knight",
        files: {
          "32m": "TerrorRadius_Knight_000.ogg",
          "16m": "TerrorRadius_Knight_001.ogg",
          "8m": "TerrorRadius_Knight_002.ogg",
          "chase": "TerrorRadius_Knight_003.ogg"
        }
      },
      {
        name: "Skull Merchant",
        files: {
          "32m": "TerrorRadius_Skull_Merchant_000.ogg",
          "16m": "TerrorRadius_Skull_Merchant_001.ogg",
          "8m": "TerrorRadius_Skull_Merchant_002.ogg",
          "chase": "TerrorRadius_Skull_Merchant_003.ogg"
        }
      },
      {
        name: "Singularity",
        files: {
          "32m": "TerrorRadius_Singularity_000.ogg",
          "16m": "TerrorRadius_Singularity_001.ogg",
          "8m": "TerrorRadius_Singularity_002.ogg",
          "chase": "TerrorRadius_Singularity_003.ogg"
        }
      },
      {
        name: "Xenomorph",
        files: {
          "32m": "TerrorRadius_Xenomorph_000.ogg",
          "16m": "TerrorRadius_Xenomorph_001.ogg",
          "8m": "TerrorRadius_Xenomorph_002.ogg",
          "chase": "TerrorRadius_Xenomorph_003.ogg"
        }
      },
      {
        name: "Good Guy",
        files: {
          "32m": "TerrorRadius_Good_Guy_000.ogg",
          "16m": "TerrorRadius_Good_Guy_001.ogg",
          "8m": "TerrorRadius_Good_Guy_002.ogg",
          "chase": "TerrorRadius_Good_Guy_003.ogg"
        }
      },
      {
        name: "Unknown",
        files: {
          "32m": "TerrorRadius_Unknown_000.ogg",
          "16m": "TerrorRadius_Unknown_001.ogg",
          "8m": "TerrorRadius_Unknown_002.ogg",
          "chase": "TerrorRadius_Unknown_003.ogg"
        }
      },
      {
        name: "Lich",
        files: {
          "32m": "TerrorRadius_Lich_000.ogg",
          "16m": "TerrorRadius_Lich_001.ogg",
          "8m": "TerrorRadius_Lich_002.ogg",
          "chase": "TerrorRadius_Lich_003.ogg"
        }
      },
      {
        name: "Dark Lord",
        files: {
          "32m": "TerrorRadius_Dark_Lord_000.ogg",
          "16m": "TerrorRadius_Dark_Lord_001.ogg",
          "8m": "TerrorRadius_Dark_Lord_002.ogg",
          "chase": "TerrorRadius_Dark_Lord_003.ogg"
        }
      },
	        {
        name: "Houndmaster",
        files: {
          "32m": "TerrorRadius_Houndmaster_000.ogg",
          "16m": "TerrorRadius_Houndmaster_001.ogg",
          "8m": "TerrorRadius_Houndmaster_002.ogg",
          "chase": "TerrorRadius_Houndmaster_003.ogg"
        }
      },
      {
        name: "Ghoul",
        files: {
          "32m": "TerrorRadius_Ghoul_000.ogg",
          "16m": "TerrorRadius_Ghoul_001.ogg",
          "8m": "TerrorRadius_Ghoul_002.ogg",
          "chase": "TerrorRadius_Ghoul_003.ogg"
        }
      },
      {
        name: "Animatronic",
        files: {
          "32m": "TerrorRadius_Animatronic_000.ogg",
          "16m": "TerrorRadius_Animatronic_001.ogg",
          "8m": "TerrorRadius_Animatronic_002.ogg",
          "chase": "TerrorRadius_Animatronic_003.ogg"
        }
      },
    ];

    const tierLabels = ["32m", "16m", "8m", "chase"];
    let currentKiller = null;
    let gameWon = false;
    let unlockedTier = 0;
    let currentAudio = new Audio();
    let playingTier = null;
    let previousGuesses = new Set();

    const guessesContainer = document.getElementById("guesses");
    const winMessage = document.getElementById("winMessage");
    const newRoundButton = document.getElementById("newRoundButton");
    const guessInput = document.getElementById("guessInput");
    const suggestions = document.getElementById("suggestions");

    const buttons = Array.from(document.querySelectorAll(".audio-btn"));

    function resetAudioButtons() {
      buttons.forEach((btn, i) => {
        const label = tierLabels[i];
        btn.textContent = `${label} ${i <= unlockedTier ? '▶' : '🔒'}`;
      });
    }

    function startNewGame() {
      currentKiller = killers[Math.floor(Math.random() * killers.length)];
      gameWon = false;
      unlockedTier = 0;
      playingTier = null;
      previousGuesses.clear();
      winMessage.textContent = '';
      guessesContainer.innerHTML = '';
      guessInput.value = '';
      newRoundButton.style.display = 'none';
      if (currentAudio) currentAudio.pause();
      resetAudioButtons();
    }

    buttons.forEach((button, index) => {
      button.addEventListener("click", () => {
        if (index > unlockedTier || !currentKiller) return;

        const label = tierLabels[index];
        const file = currentKiller.files[label];

        if (playingTier === index) {
          currentAudio.pause();
          currentAudio.currentTime = 0;
          button.textContent = `${label} ▶`;
          playingTier = null;
        } else {
          if (currentAudio) {
            currentAudio.pause();
            resetAudioButtons();
          }
          currentAudio = new Audio(`sounds/${file}`);
          currentAudio.play();
          button.textContent = `${label} ⏸`;
          playingTier = index;

          currentAudio.addEventListener("ended", () => {
            button.textContent = `${label} ▶`;
            playingTier = null;
          });
        }
      });
    });

    document.getElementById("submitGuess").addEventListener("click", () => {
      const userGuess = guessInput.value.trim();
      const guessLower = userGuess.toLowerCase();

      if (!currentKiller || gameWon || !userGuess) return;

      if (previousGuesses.has(guessLower)) {
        alert("You've already guessed that!");
        return;
      }

      const validKillers = killers.map(k => k.name.toLowerCase());
      if (!validKillers.includes(guessLower)) {
        alert("Invalid killer name. Please choose from the list.");
        return;
      }

      previousGuesses.add(guessLower);
      const guessRow = document.createElement("div");
      guessRow.classList.add("guess-row");
      guessRow.textContent = killers.find(k => k.name.toLowerCase() === guessLower)?.name || userGuess;

      // Stop any playing audio
      if (currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
        playingTier = null;
      }
      resetAudioButtons();

      if (guessLower === currentKiller.name.toLowerCase()) {
        guessRow.classList.add("correct");
        winMessage.textContent = "You win!";
        gameWon = true;
        newRoundButton.style.display = 'inline-block';
      } else {
        guessRow.classList.add("wrong");
        if (unlockedTier < 3) unlockedTier++;
        resetAudioButtons();
      }

      guessesContainer.appendChild(guessRow);
      guessInput.value = '';
    });

    newRoundButton.addEventListener("click", () => {
      startNewGame();
    });

    guessInput.addEventListener("input", () => {
      const input = guessInput.value.toLowerCase();
      const matches = killers.filter(k => k.name.toLowerCase().startsWith(input)).map(k => k.name);
      suggestions.innerHTML = '';
      if (input === '' || matches.length === 0) {
        suggestions.style.display = 'none';
        return;
      }
      matches.forEach(match => {
        const div = document.createElement("div");
        div.textContent = match;
        div.addEventListener("click", () => {
          guessInput.value = match;
          suggestions.style.display = 'none';
        });
        suggestions.appendChild(div);
      });
      suggestions.style.display = 'block';
    });

    guessInput.addEventListener("blur", () => {
      setTimeout(() => suggestions.style.display = 'none', 200);
    });

    // Start first round
    startNewGame();
  </script>
</body>
</html>
